<md-content class="md-padding">
    <h1 class="md-display-2">Welcome to challenge workspace</h1>
    <md-list>
        <md-list-item class="md-3-line" ng-repeat="news in vm.news">
            <div class="md-list-item-text">
                <h3>{{news.title}}</h3>
                <p>{{news.content}}</p>
            </div>
            <md-divider ng-if="!$last"></md-divider>
        </md-list-item>
    </md-list>
    <div>
        <md-button ng-show="!vm.isEventEnded" class="md-primary md-raised" ng-click="vm.showAskForm()">Ask a question</md-button>
        <md-button class="md-primary md-raised" ng-click="vm.showAnswerForm()">Show my questions</md-button>
    </div>
</md-content>

<form ng-show="vm.askFormTriggered" class="md-padding">
    <div layout-gt-sm="row">
        <md-input-container class="md-block" flex-gt-sm>
            <label>Subject</label>
            <input ng-model="vm.question.subject" />
        </md-input-container>
    </div>
    <div layout-gt-sm="row">
        <md-input-container class="md-block" flex-gt-sm>
            <label>Content</label>
            <textarea ng-model="vm.question.content" md-maxlength="250" rows="5" md-select-on-focus></textarea>
        </md-input-container>
    </div>
    <md-button class="md-primary md-raised" ng-click="vm.submitQuestion()">Submit</md-button>
</form>

<form ng-show="vm.answerFormTriggered" class="md-padding">
    <md-content class="md-padding">
        <div class="panel-group" ng-repeat="q in vm.questions">
            <div class="row panel-heading">
                <div class="col-md-8">
                    <h4 ng-if="!q.reply" class="panel-title w3-text-black">
                        {{q.subject}}
                    </h4>
                    <h4 ng-if="q.reply" class="panel-title w3-text-grey">
                        {{q.subject}}
                    </h4>
                    <p>{{q.content}}</p>
                    <p class="label label-primary">{{q.totalcmt}} reply</p>
                </div>
                <div class="col-md-4">
                    <md-checkbox class="pull-right" ng-model="q.click">Show Answers</md-checkbox>

                    <span class="btn-group pull-right" ng-show="!vm.isEventEnded">
                        <button class="btn btn-warning btn-sm" ng-click="vm.editQuestion(q)">
                            <span class="glyphicon glyphicon-pencil"></span>&nbsp;Edit</button>

                        <button class="btn btn-danger btn-sm" ng-click="vm.deleteQuestion(q)">
                            <span class="glyphicon glyphicon-trash"></span>&nbsp;Delete</button>
                    </span>
                </div>
            </div>
            <div ng-show="q.click" style="margin-left:10%">
                <div ng-repeat="ans in q.answers">
                    <span ng-if="ans.answerByType == 'BY_HOST'" class="label label-primary">Admin</span>
                    <span ng-if="ans.answerByType == 'BY_USER'" class="label w3-grey">{{vm.account.login}}</span>
                    {{ans.content}}
                    <span class="btn-group pull-right" ng-show="!vm.isEventEnded">
                        <button ng-if="vm.account.login === ans.createdBy" class="btn btn-warning btn-xs" ng-click="vm.editComment(ans, $index)">Edit</button>
                        <button ng-if="vm.account.login === ans.createdBy" class="btn btn-danger btn-xs" ng-click="vm.deleteComment(ans, $index)">Delete</button>
                    </span>
                    <hr>
                </div>
                <div ng-show="!vm.isEventEnded">
                    <md-input-container class="md-block" flex-gt-sm>
                        <label>Type answer here</label>
                        <textarea name="answer" ng-model="vm.answer.content" md-maxlength="1000" rows="3" md-select-on-focus></textarea>
                    </md-input-container>
                    <md-button class="md-primary md-raised" ng-click="vm.postAnswer(q.id)">Reply</md-button>
                </div>
            </div>
            <md-divider ng-if="!$last"></md-divider>
        </div>
    </md-content>
</form>