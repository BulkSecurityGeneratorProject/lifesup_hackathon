<md-content class="md-padding">
    <h1 class="md-display-2">Welcome to challenge workspace</h1>
    <md-list>
        <md-list-item class="md-3-line" ng-repeat="news in vm.news">
            <div class="md-list-item-text">
                <h3>{{news.title}}</h3>
                <p>{{news.content}}</p>
            </div>
            <md-button class="md-secondary md-raised" ng-click="vm.updateNews(news)">Edit</md-button>
            <md-button class="md-secondary md-raised" ng-click="vm.deleteNews(news)">Delete</md-button>
            <md-divider ng-if="!$last"></md-divider>
        </md-list-item>
    </md-list>
    <div>
        <md-button ng-show="!vm.isEventEnded" class="md-primary md-raised" ng-click="vm.showNewsForm()">Post news</md-button>
        <md-button class="md-primary md-raised" ng-click="vm.showAnswerForm()">Show questions</md-button>
    </div>
</md-content>

<form ng-show="vm.newsFormTriggered" class="md-padding">
    <div class="news-form">
        <div layout-gt-sm="row">
            <md-input-container class="md-block" flex-gt-sm>
                <label>Title</label>
                <input ng-model="vm.newsEntity.title" />
            </md-input-container>
        </div>
        <div layout-gt-sm="row">
            <md-input-container class="md-block" flex-gt-sm>
                <label>Content</label>
                <textarea name="timelineText" ng-model="vm.newsEntity.content" md-maxlength="1000" rows="5" md-select-on-focus></textarea>
            </md-input-container>
        </div>
        <md-button class="md-primary md-raised" ng-click="vm.postNews()">Save</md-button>
    </div>
</form>

<form ng-show="vm.answerFormTriggered" class="md-padding">
    <md-content class="md-padding">
        <div class="panel-group" ng-repeat="q in vm.questions">
            <div class="row panel-heading">
                <div class="col-md-9">
                    <h4 ng-if="!q.reply" class="panel-title w3-text-black">
                        {{q.subject}}
                    </h4>
                    <h4 ng-if="q.reply" class="panel-title w3-text-grey">
                        {{q.subject}}
                    </h4>
                    <p>{{q.content}}</p>
                    <p class="label label-primary">{{q.totalcmt}} reply</p>
                </div>
                <div class="col-md-3">
                    <md-checkbox class="pull-right" ng-model="q.click">Show Answers</md-checkbox>
                </div>
            </div>
            <div ng-show="q.click" style="margin-left:10%">
                <div ng-repeat="ans in q.answers">
                    <span ng-if="ans.answerByType == 'BY_HOST'" class="label label-primary">Admin</span>
                    <span ng-if="ans.answerByType == 'BY_USER'" class="label w3-grey">{{vm.account.login}}</span>
                    {{ans.content}}
                    <span class="btn-group pull-right" ng-show="!vm.isEventEnded">
                        <button ng-if="vm.account.login === ans.createdBy" class="btn btn-warning btn-xs" ng-click="vm.editComment(ans, $index)">Edit</button>
                        <button ng-if="vm.account.login === ans.createdBy" class="btn btn-danger btn-xs" ng-click="vm.deleteComment(ans, $index)">Delete</button>
                    </span>
                    <hr>
                </div>
                <div ng-show="!vm.isEventEnded">
                    <md-input-container class="md-block" flex-gt-sm>
                        <label>Type answer here</label>
                        <textarea name="answer" ng-model="vm.answer.content" md-maxlength="1000" rows="3" md-select-on-focus></textarea>
                    </md-input-container>
                    <md-button class="md-primary md-raised" ng-click="vm.postAnswer(q.id)">Reply</md-button>
                </div>
            </div>
            <md-divider ng-if="!$last"></md-divider>
        </div>
    </md-content>
</form>